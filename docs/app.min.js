(()=>{var e={686:()=>{},800:()=>{},379:(e,t,n)=>{"use strict";var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function o(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],a=0;a<e.length;a++){var s=e[a],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var f=o(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(i[f].references++,i[f].updater(h)):i.push({identifier:l,updater:m(h,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function h(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,v=0;function m(e,t){var n,r,a;if(t.singleton){var i=v++;n=d||(d=u(t)),r=f.bind(null,n,i,!1),a=f.bind(null,n,i,!0)}else n=u(t),r=h.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=o(n[r]);i[a].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=u}}}}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(379),t=n.n(e),r=n(686),a=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t()(a(),{insert:"head",singleton:!1}),a().locals;var o=36e5,s=function(e,t,n){return e>1?n:t},u=function(e,t,n){return e?e+" "+s(e,t,n):""},c=function(e,t){return e.toString().padStart(t,"0")},l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getFullWords",value:function(e){var t=" and ",n=new Date(e),r=n.getUTCHours(),a=n.getUTCMinutes(),i=n.getUTCSeconds(),o="",s="";switch((r?8:0)+(a?4:0)+(i?2:0)){case 0:case 2:case 4:case 8:break;case 6:case 10:s=t;break;case 12:o=t;break;case 14:o=", ",s=t}return u(r,"hour","hours")+o+u(a,"minute","minutes")+s+u(i,"second","seconds")}},{key:"getDigits",value:function(e){var t=e%o/6e4|0,n=e%6e4/1e3|0;return"".concat(c(e%864e5/o|0,2),":").concat(c(t,2),":").concat(c(n,2))}},{key:"getHours",value:function(e){var t=Math.round(e/1e3/60/60);return"".concat(t," ").concat(s(t,"hour","hours"))}},{key:"getMinutes",value:function(e){var t=Math.round(e/1e3/60);return"".concat(t," ").concat(s(t,"minute","minutes"))}}],null&&i(t.prototype,null),n&&i(t,n),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v,m,p,y=function(){for(var e=new Map,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){var n=h(t,2),r=n[0],a=n[1];e.set(r,a)})),e}(["before","success"],["running","primary"],["hanging","warning"],["after","success"],["rest","unknown"]),b=Object.freeze(["before","running","hanging","after","rest"]),g=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=t,this.start=n,this.end=r,this.duration=this.end-this.start,this.type=b.includes(a)?a:void 0}var t,n,r;return t=e,r=[{key:"getBeltItemType",value:function(e){var t;return null!==(t=y.get(e))&&void 0!==t?t:"unknown"}}],(n=[{key:"includes",value:function(e){return this.start<=e&&e<=this.end}}])&&f(t.prototype,n),r&&f(t,r),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}v=g,m="rest",p=Object.freeze(new g("Rest",void 0,void 0,"rest")),m in v?Object.defineProperty(v,m,{value:p,enumerable:!0,configurable:!0,writable:!0}):v.rest=p;var w=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_date",new Date),this._date.setHours(t),this._date.setMinutes(n),this._date.setSeconds(0)}var t,n;return t=e,(n=[{key:"valueOf",value:function(){return this._date.valueOf()}}])&&_(t.prototype,n),e}();function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=Object.freeze(["timechange","remindspanchange","spanchange"]),j=function(){function e(){k(this,e),S(this,"_events",{}),S(this,"_spans",[]),S(this,"_remindBefore",0),S(this,"_intervalId",0),S(this,"_start",0),S(this,"_end",0)}var t,n;return t=e,(n=[{key:"_emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._events[e].forEach((function(e){return e.apply(void 0,n)}))}},{key:"_getSpanByTime",value:function(e){var t;return null!==(t=this._spans.find((function(t){return t.includes(e)})))&&void 0!==t?t:g.rest}},{key:"_getState",value:function(){var e=Date.now(),t=this._getSpanByTime(e),n=this._spans.indexOf(t);if("rest"===t.type)return new A(0,0,0,-1,0,t);var r=this._duration,a=this._end-e,i=r-a,o=t.end-e;return new A(r,i,a,n,o,t)}},{key:"init",value:function(e){var t=this;this._spans=[],e.spans.forEach((function(e){var n=I(e.start.split(":"),2),r=n[0],a=n[1],i=I(e.end.split(":"),2),o=i[0],s=i[1];t._spans.push(new g(e.title,new w(r,a),new w(o,s),e.type))})),this._remindBefore=60*e.remindBefore*1e3,this._start=this._spans[0].start,this._end=this._spans[this._spans.length-1].end,this._duration=this._end-this._start}},{key:"addEventListener",value:function(e,t){x.includes(e)&&(this._events[e]=this._events[e]||[],this._events[e].push(t))}},{key:"run",value:function(){var e,t=this,n=this._getState();this._emit("spanchange",n),this._emit("timechange",n),this._intervalId=setInterval((function(){e=n,"rest"!==(n=t._getState()).span.type&&t._emit("timechange",n),Math.abs(n.spanLeft-t._remindBefore)<500&&t._emit("remindspanchange",n),e.spanIndex!==n.spanIndex&&t._emit("spanchange",n)}),1e3)}},{key:"stop",value:function(){clearInterval(this._intervalId)}},{key:"getBeltOptions",value:function(){var e=this._duration;return{items:this._spans.map((function(e){return{value:0,max:e.duration,type:g.getBeltItemType(e.type)}})),max:e}}}])&&O(t.prototype,n),e}(),A=function e(t,n,r,a,i,o){k(this,e),this.scheduleDuration=t,this.scheduleCurrent=n,this.scheduleLeft=r,this.spanIndex=a,this.spanLeft=i,this.span=o};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"_create",value:function(e,t){return new Notification(e,t)}},{key:"_request",value:function(){return Notification.requestPermission()}},{key:"show",value:function(e,t){var n=this;this._granted?this._create(e,t):this._request().then((function(r){"granted"===r&&n._create(e,t)}))}},{key:"_granted",get:function(){return"granted"===Notification.permission}}],null&&T(t.prototype,null),n&&T(t,n),e}();function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"APP_NAME";M(this,e),this._LOCAL_STORAGE_ITEM_KEY=t,this._load(),this._save()}var t,n;return t=e,(n=[{key:"_save",value:function(){localStorage.setItem(this._LOCAL_STORAGE_ITEM_KEY,JSON.stringify(this._cache))}},{key:"_load",value:function(){var e;this._cache=null!==(e=JSON.parse(localStorage.getItem(this._LOCAL_STORAGE_ITEM_KEY)))&&void 0!==e?e:Object.create(null)}},{key:"getItem",value:function(e){var t;return null!==(t=this._cache[e])&&void 0!==t?t:null}},{key:"setItem",value:function(e,t){this._cache[e]=t,this._save()}},{key:"removeItem",value:function(e){this._cache[e]=void 0,this._save()}},{key:"clear",value:function(){localStorage.removeItem(this._LOCAL_STORAGE_ITEM_KEY)}}])&&L(t.prototype,n),e}(),N=n(800),P=n.n(N);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t()(P(),{insert:"head",singleton:!1}),P().locals;var H,V=function(e,t){if(e>t)throw new Error("incorrect: part === ".concat(e," > total === ").concat(t,"!"));return 100*e/t},q=(Object.freeze(["primary","success","warning","failure","comment","unknown"]),function e(t,n,r){R(this,e);var a=document.createElement("div");a.className="belt-item belt-item--".concat(r);var i=document.createElement("div");i.className="belt-item__value",a.appendChild(i),this.itemElement=a,this.valueElement=i,this.value=t,this.max=n,this.type=r}),z=function(){function e(){R(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(t,n){var r=new e;return r.init(t,n),r}}],(n=[{key:"init",value:function(e,t){var n,r=this;this._element=e,this._max=t.max,this._beltItems=[],(n=this._element.childNodes,function(e){if(Array.isArray(e))return D(e)}(n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return e.remove()})),t.items.forEach((function(e,t){var n=new q(e.value,e.max,e.type);r._beltItems.push(n),r._element.appendChild(n.itemElement),r.setItemMax(t,e.max),r.setItemValue(t,e.value)}))}},{key:"getItemByIndex",value:function(e){return this._beltItems[e]}},{key:"setItemMax",value:function(e,t){var n=this.getItemByIndex(e);n.max=t,n.itemElement.style.width="".concat(V(t,this._max),"%")}},{key:"setItemValue",value:function(e,t){var n=this.getItemByIndex(e);n.value=t,n.valueElement.style.width="".concat(V(t,n.max),"%")}},{key:"setItemType",value:function(e,t){var n=this.getItemByIndex(e);n.type=t,n.itemElement.className="belt-item belt-item--".concat(t)}},{key:"setValue",value:function(e){var t=this;this._beltItems.forEach((function(n,r){e-=n.max,t.setItemValue(r,e>0?n.max:n.max+e)}))}},{key:"setType",value:function(e){var t=this;this._beltItems.forEach((function(n,r){t.setItemType(r,e)}))}},{key:"selectItem",value:function(e){var t=this.getItemByIndex(e);t.itemElement.className="belt-item belt-item--".concat(t.type," belt-item--selected")}},{key:"resetSelection",value:function(){this._beltItems.forEach((function(e){e.itemElement.className="belt-item belt-item--".concat(e.type)}))}}])&&U(t.prototype,n),r&&U(t,r),e}(),G=new j,K=new B("utio"),Y=new z,F=document.getElementById("utio-header"),J=document.getElementById("utio-output"),$=document.getElementById("utio-select"),W=function(e){fetch("app/config/".concat(e)).then((function(e){return e.json()})).then((function(e){G.stop(),G.init(e),Y.init(document.getElementById("utio-belt"),G.getBeltOptions()),G.run()}))};G.addEventListener("timechange",(function(e){document.title="".concat(l.getDigits(e.scheduleLeft)," - utio"),J.value="".concat(l.getDigits(e.spanLeft)," before next, ~").concat(l.getHours(e.scheduleLeft)," until end."),Y.setValue(e.scheduleCurrent)})),G.addEventListener("remindspanchange",(function(e){C.show("".concat(e.span.title," will end soon!"),{body:"It's ".concat(l.getMinutes(e.spanLeft)," before it ends.")})})),G.addEventListener("spanchange",(function(e){F.textContent="".concat(e.span.title),Y.resetSelection(),e.spanIndex>-1&&Y.selectItem(e.spanIndex)}));var Q=null!==(H=K.getItem("config"))&&void 0!==H?H:"work-local.json";$.value=Q,W(Q),$.addEventListener("change",(function(){K.setItem("config",$.value),W($.value)}))})()})();